<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Service Directory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
        }
        .bg-gradient-hero {
            background-image: linear-gradient(90.00deg, rgba(1, 50, 35, 1), rgba(0, 103, 71, 1) 50%, rgba(1, 50, 35, 1) 100%);
        }
        .card-shadow {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        .btn-call {
            background-color: #4CAF50;
            color: white;
        }
        .btn-copy {
            background-color: #f0f0f0;
            color: #333;
        }
    </style>
</head>
<body class="bg-[#d9f3ff]">

    <div id="alert-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg p-6 max-w-sm w-full card-shadow text-center">
            <p id="alert-message" class="text-gray-800 text-lg font-semibold mb-4"></p>
            <button id="alert-close" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200">OK</button>
        </div>
    </div>

    <div id="copy-alert-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg p-6 max-w-sm w-full card-shadow text-center">
            <p id="copy-alert-message" class="text-gray-800 text-lg font-semibold mb-4"></p>
            <button id="copy-alert-close" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200">OK</button>
        </div>
    </div>

    <nav class="bg-white shadow-md rounded-b-xl px-4 py-3 flex justify-between items-center z-10 sticky top-0">
        <div class="flex items-center space-x-2">
            <img src="./assets/logo.png" alt="Bangladesh Government Logo" class="w-10 h-10">
            <span class="text-xl font-bold text-gray-800 hidden sm:block">Emergency <br>
                Service</span>
        </div>
        <div class="flex items-center space-x-4">
            <div class="flex items-center space-x-2 bg-gray-100 rounded-full px-4 py-2">
                <i class="fas fa-heart text-red-500 text-xl"></i>
                <span id="heart-count" class="font-semibold text-lg text-gray-800">0</span>
            </div>
            <div class="flex items-center space-x-2 bg-gray-100 rounded-full px-4 py-2">
                <i class="fas fa-coins text-yellow-500 text-xl"></i>
                <span id="coin-count" class="font-semibold text-lg text-gray-800">100</span>
            </div>
            <button class="flex items-center space-x-2 bg-green-500 text-white font-semibold px-4 py-2 rounded-full shadow-md">
                <i class="fas fa-copy text-sm"></i>
                <span>Copy</span>
                <span id="copy-count" class="ml-1">0</span>
            </button>
        </div>
    </nav>

    <main class="container mx-auto p-4 md:p-8">
        <section class="bg-gradient-hero rounded-3xl p-8 md:p-12 text-center mb-8 card-shadow text-white">
            <div class="flex justify-center mb-4">
                <img src="./assets/logo-dark.png" alt="Hero Logo" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full">
            </div>
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-white mb-2">
                Emergency Service Directory
            </h1>
            <p class="text-lg sm:text-xl md:text-2xl font-medium text-white">
                A Project by Government of the People's Republic of Bangladesh
            </p>
        </section>

        <section class="grid grid-cols-1 md:grid-cols-3 gap-6">

            <div class="md:col-span-2">
                <div id="card-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    </div>
            </div>

            <div class="md:col-span-1 bg-white rounded-3xl p-6 card-shadow h-fit mt-6 md:mt-0">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-800">
                        <i class="fas fa-history text-blue-500 mr-2"></i>Call History
                    </h3>
                    <button id="clear-history-btn" class="px-4 py-2 text-sm font-semibold rounded-full text-red-600 bg-red-100 hover:bg-red-200 transition-colors duration-200">
                        Clear
                    </button>
                </div>
                <div id="history-container" class="space-y-4">
                    </div>
            </div>

        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // State Management
            let coins = 100;
            let heartCount = 0;
            let copyCount = 0;
            const callHistory = [];

            // DOM Elements
            const coinCountEl = document.getElementById('coin-count');
            const heartCountEl = document.getElementById('heart-count');
            const copyCountEl = document.getElementById('copy-count');
            const cardContainer = document.getElementById('card-container');
            const historyContainer = document.getElementById('history-container');
            const clearHistoryBtn = document.getElementById('clear-history-btn');
            const alertModal = document.getElementById('alert-modal');
            const alertMessage = document.getElementById('alert-message');
            const alertCloseBtn = document.getElementById('alert-close');
            const copyAlertModal = document.getElementById('copy-alert-modal');
            const copyAlertMessage = document.getElementById('copy-alert-message');
            const copyAlertCloseBtn = document.getElementById('copy-alert-close');

            // Sample Data for cards
            const services = [
                {
                    icon: 'assets/police.png',
                    name: 'Police',
                    englishName: 'Police Service',
                    hotlineNumber: '999',
                    category: 'Emergency',
                    liked: false
                },
                {
                    icon: 'assets/fire-service.png',
                    name: 'Fire Service',
                    englishName: 'Fire Service',
                    hotlineNumber: '999',
                    category: 'Emergency',
                    liked: false
                },
                {
                    icon: 'assets/emergency.png',
                    name: 'Ambulance',
                    englishName: 'Ambulance Service',
                    hotlineNumber: '102',
                    category: 'Medical',
                    liked: false
                },
                {
                    icon: 'assets/emergency.png',
                    name: 'Road Accident',
                    englishName: 'Road Accident Helpline',
                    hotlineNumber: '106',
                    category: 'Road',
                    liked: false
                },
                {
                    icon: 'assets/emergency.png',       
                    name: 'Disaster Helpline',
                    englishName: 'Disaster Management',
                    hotlineNumber: '1090',
                    category: 'Disaster',
                    liked: false
                },
                {
                    icon: 'assets/police.png',
                    name: 'Anti-Corruption',
                    englishName: 'Anti-Corruption Hotline',
                    hotlineNumber: '106',
                    category: 'General',
                    liked: false
                },
                {
                    icon: 'assets/emergency.png',
                    name: 'National Emergency',
                    englishName: 'National Emergency Service',
                    hotlineNumber: '999',
                    category: 'Emergency',
                    liked: false
                },
                {
                    icon: 'assets/police.png',
                    name: 'Tourist Helpline',
                    englishName: 'Tourist Assistance',
                    hotlineNumber: '119',
                    category: 'Travel',
                    liked: false
                },
                {
                    icon: 'assets/brac.png',
                    name: 'Child Helpline',
                    englishName: 'Child Welfare Service',
                    hotlineNumber: '1098',
                    category: 'Welfare',
                    liked: false
                }
            ];

            // Functions
            function updateCounts() {
                coinCountEl.textContent = coins;
                heartCountEl.textContent = heartCount;
                copyCountEl.textContent = copyCount;
            }

            function showCustomAlert(message, type) {
                if (type === 'copy') {
                    copyAlertMessage.textContent = message;
                    copyAlertModal.classList.remove('hidden');
                    copyAlertModal.classList.add('flex');
                } else {
                    alertMessage.textContent = message;
                    alertModal.classList.remove('hidden');
                    alertModal.classList.add('flex');
                }
            }

            function renderCards() {
                cardContainer.innerHTML = services.map((service, index) => `
                    <div class="bg-white rounded-2xl p-6 card-shadow flex flex-col">
                        <div class="flex justify-between items-center mb-4">
                            <img src="${service.icon}" alt="${service.name} icon" class="w-10 h-10 object-contain">
                            <i class="fas fa-heart text-gray-300 hover:text-red-500 cursor-pointer text-xl" data-index="${index}" data-action="like"></i>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800">${service.name}</h4>
                        <p class="text-md text-gray-500 mb-2">${service.englishName}</p>
                        <p class="text-3xl font-bold text-gray-900 mb-4">${service.hotlineNumber}</p>
                        <span class="bg-gray-200 text-gray-700 text-sm font-medium px-2.5 py-1 rounded-full w-fit mb-4">${service.category}</span>
                        <div class="flex space-x-4 w-full">
                            <button class="flex-1 px-4 py-2 rounded-full font-semibold btn-copy transition-colors duration-200 flex items-center justify-center space-x-2" data-index="${index}" data-action="copy">
                                <i class="fas fa-copy text-sm"></i>
                                <span class="hidden sm:block">Copy</span>
                            </button>
                            <button class="flex-1 px-4 py-2 rounded-full font-semibold btn-call transition-colors duration-200 flex items-center justify-center space-x-2" data-index="${index}" data-action="call">
                                <i class="fas fa-phone-alt text-sm"></i>
                                <span class="hidden sm:block">Call</span>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            function renderHistory() {
                historyContainer.innerHTML = callHistory.map(item => `
                    <div class="bg-gray-100 p-4 rounded-xl flex justify-between items-center text-sm">
                        <div>
                            <p class="font-bold text-gray-800">${item.name}</p>
                            <p class="text-gray-600">${item.number}</p>
                        </div>
                        <span class="text-gray-500 text-xs">${item.time}</span>
                    </div>
                `).join('');
            }

            // Event Listeners
            alertCloseBtn.addEventListener('click', () => {
                alertModal.classList.remove('flex');
                alertModal.classList.add('hidden');
            });

            copyAlertCloseBtn.addEventListener('click', () => {
                copyAlertModal.classList.remove('flex');
                copyAlertModal.classList.add('hidden');
            });

            cardContainer.addEventListener('click', (e) => {
                const target = e.target.closest('button, i, img');
                if (!target) return;

                const index = target.dataset.index;
                const action = target.dataset.action;
                const service = services[index];

                if (action === 'like') {
                    heartCount++;
                    updateCounts();
                    target.classList.toggle('text-gray-300');
                    target.classList.toggle('text-red-500');
                } else if (action === 'call') {
                    if (coins < 20) {
                        showCustomAlert('Not enough coins to make a call!', 'call');
                        return;
                    }
                    coins -= 20;
                    updateCounts();
                    const now = new Date();
                    const timeString = `${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')} ${now.getHours() >= 12 ? 'PM' : 'AM'}`;
                    callHistory.push({
                        name: service.name,
                        number: service.hotlineNumber,
                        time: timeString
                    });
                    renderHistory();
                    showCustomAlert(`Calling ${service.name} at ${service.hotlineNumber}`, 'call');
                } else if (action === 'copy') {
                    copyCount++;
                    updateCounts();
                    const hotlineText = service.hotlineNumber;
                    navigator.clipboard.writeText(hotlineText).then(() => {
                        showCustomAlert(`Copied ${hotlineText} to clipboard!`, 'copy');
                    }).catch(err => {
                        console.error('Failed to copy text: ', err);
                        showCustomAlert('Failed to copy to clipboard.', 'copy');
                    });
                }
            });

            clearHistoryBtn.addEventListener('click', () => {
                callHistory.length = 0; // Clear the array
                renderHistory();
            });

            // Initial render
            updateCounts();
            renderCards();
            renderHistory();
        });
    </script>

</body>
</html>